(()=>{var t={n:e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};(()=>{"use strict";t.r(e);const n=flarum.core.compat["common/app"];var i=t.n(n);const s=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/components/DiscussionComposer"];var r=t.n(o);const a=flarum.core.compat["forum/utils/DiscussionControls"];var u=t.n(a);const l=flarum.core.compat["forum/app"];var c=t.n(l);const p=flarum.core.compat["forum/components/SettingsPage"];var f=t.n(p);const d=flarum.core.compat["common/components/FieldSet"];var h=t.n(d);const g=flarum.core.compat["common/utils/ItemList"];var v=t.n(g);const y=flarum.core.compat["common/components/Switch"];var P=t.n(y);const b=flarum.core.compat["common/utils/Stream"];var w=t.n(b);function L(){return L=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},L.apply(this,arguments)}const D=flarum.core.compat["forum/states/DiscussionListState"];var O=t.n(D);function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function S(){try{var t=new URL(window.location.href).searchParams.get("page"),e=parseInt(t,10);return Number.isFinite(e)&&e>0?e:null}catch(t){return null}}function A(t,e){void 0===e&&(e=!0);try{var n=new URL(window.location.href);t<=1?n.searchParams.delete("page"):n.searchParams.set("page",String(t));var i=n.pathname+n.search+n.hash,s=window&&window.m||null;s&&s.route&&"function"==typeof s.route.set?s.route.set(i,void 0,{replace:!0}):(e?history.replaceState:history.pushState).call(history,null,"",i)}catch(t){}}function C(){try{var t,e=window&&window.m||null;if(null!=e&&null!=(t=e.route)&&t.get)return String(e.route.get())}catch(t){}return location.pathname+location.search+(location.hash||"")}var I="lbtc:dl:pendingBack";function k(){var t=document.querySelector(".App-header, .Header, #header, header");return t?Math.max(0,t.getBoundingClientRect().height-4):0}function R(){return"lbtc:dl:anchor:"+(location.pathname+location.search+(location.hash||""))}function x(t,e){try{var n,i=t.requestParams?t.requestParams():{},s={base:location.pathname,include:i.include||[],filter:i.filter||{},sort:i.sort||null,perPage:(null==(n=t.options)?void 0:n.perPage)||20,page:Number(e)||1};return"lbtc:dl:pagecache:"+JSON.stringify(s)}catch(t){return null}}function T(t,e){try{var n=x(t,e);n&&sessionStorage.removeItem(n)}catch(t){}}function N(){O().prototype.initOptions=function(){this.options={cacheDiscussions:i().forum.attribute("foskym-pagination.cacheDiscussions"),perPage:i().forum.attribute("foskym-pagination.perPage"),perLoadMore:i().forum.attribute("foskym-pagination.perLoadMore"),perIndexInit:i().forum.attribute("foskym-pagination.perIndexInit"),leftEdges:4,rightEdges:5},this.usePaginationMode=function(){if(null===c().session.user)return c().forum.attribute("foskym-pagination.paginationOnLoading");var t=c().session.user.preferences();return c().forum.attribute("foskym-pagination.canUserPref")&&t["foskym-pagination.userCustom"]?!!t["foskym-pagination.userPaginationOnLoading"]:c().forum.attribute("foskym-pagination.paginationOnLoading")}(),this.lastTotalDiscussionCount=0,this.lastTotalPages=0,this.lastDiscussions=[],this.lastLoadedPage={},this.lastRequestParams={},this.optionInitialized=!0,this.__paramsRefreshedOnce=!1},(0,s.override)(O().prototype,"refreshParams",(function(t,e,n){var i=this;void 0===n&&(n=1);var s=t(e,n);if(!this.usePaginationMode||"function"!=typeof this.refresh)return s;var o=function(){try{var t=sessionStorage.getItem(I);if(!t)return!1;var e=JSON.parse(t),n=e&&e.base===C()&&Date.now()-(e.t||0)<6e5;return n&&sessionStorage.removeItem(I),!!n}catch(t){return!1}}(),r=!this.__paramsRefreshedOnce;if(o||r){var a,u;this.__paramsRefreshedOnce=!0;var l=null!=(a=S())?a:null!=(u=n)?u:1;return Promise.resolve(s).then((function(){return i.refresh(l)}))}return this.__bypassSessionOnce=!0,T(this,1),Promise.resolve(s).then((function(){return i.refresh(1)}))})),(0,s.override)(O().prototype,"refresh",(function(t,e){var n=this;if(void 0===e&&(e=1),this.optionInitialized||this.initOptions(),!this.usePaginationMode)return this.pageSize=this.options.perLoadMore,t(e);var s=e;if(void 0===s||1===s){var o=S();o&&(s=o)}if(!this.__bypassSessionOnce){var r=function(t,e){try{var n,s=x(t,e);if(!s)return null;var o=sessionStorage.getItem(s);if(!o)return null;var r=JSON.parse(o);if(!r||!Array.isArray(r.ids)||!r.ids.length)return null;for(var a,u=t.type||"discussions",l=[],c=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r.ids);!(a=c()).done;){var p=a.value,f=i().store.getById&&i().store.getById(u,p)||i().store.getBy&&i().store.getBy(u,"id",p)||null;if(!f)return null;l.push(f)}var d=Math.ceil((r.total||0)/(r.perPage||(null==(n=t.options)?void 0:n.perPage)||20)),h={};e>1&&(h.prev=!0),e<d&&(h.next=!0);var m=l;return m.payload={jsonapi:{totalResultsCount:r.total||0},links:h},m}catch(t){return null}}(this,s);if(r){this.silentRestoreOnce=!0,this.initialLoading=!1,this.loadingPrev=!1,this.loadingNext=!1,this.isRefreshing=!1,this.location={page:s},A(s,!0),this.pages=[],this.parseResults(this.location.page,r),"undefined"!=typeof m&&m.redraw&&m.redraw();var a=function(){try{var t=sessionStorage.getItem(R());if(!t)return null;var e=JSON.parse(t);return e&&"object"==typeof e?e:null}catch(t){return null}}();return a&&(this.__pendingAnchor=a,this.__hideListOnce=!0),setTimeout((function(){return n.silentRestoreOnce=!1}),0),Promise.resolve(r)}}return this.__bypassSessionOnce=!1,this.initialLoading=!0,this.loadingPrev=!1,this.loadingNext=!1,this.isRefreshing=!0,this.clear(),this.location={page:s},A(s,!0),this.loadPage(s).then((function(t){n.pages=[],n.parseResults(n.location.page,t)})).finally((function(){n.initialLoading=!1,n.isRefreshing=!1}))})),(0,s.override)(O().prototype,"loadPage",(function(t,e){void 0===e&&(e=1);var n=this.requestParams();this.optionInitialized||this.initOptions(),this.lastRequestParams.include||(this.lastRequestParams=n);var s=i().preloadedApiDocument();if(s)return this.initialLoading=!1,this.isRefreshing=!1,this.totalDiscussionCount=w()(s.payload.jsonapi.totalResultsCount),this.lastTotalDiscussionCount=this.totalDiscussionCount(),Promise.resolve(s);if(!this.isRefreshing&&this.options.cacheDiscussions){var o=JSON.stringify(n.include)!==JSON.stringify(this.lastRequestParams.include),r=JSON.stringify(n.filter)!==JSON.stringify(this.lastRequestParams.filter),a=n.sort!==this.lastRequestParams.sort;if(!(o||r||a)&&this.lastLoadedPage[e]){var u=this.options.perPage*(e-1),l=this.options.perPage*e,c=this.lastDiscussions.slice(u,l);return c.payload={jsonapi:{totalResultsCount:this.totalDiscussionCount()}},this.initialLoading=!0,"undefined"!=typeof m&&m.redraw&&m.redraw(),new Promise((function(t){return setTimeout((function(){return t(c)}),50)}))}}var p,f,d=Array.isArray(n.include)?n.include.join(","):n.include;this.usePaginationMode?(p=this.options.perPage*(e-1),f=this.options.perPage):f=0==(p=this.options.perIndexInit*Math.min(e-1,1)+this.options.perLoadMore*Math.max(e-2,0))?this.options.perIndexInit:this.options.perLoadMore;var h=L({},n,{page:L({},n.page,{offset:p,limit:f}),include:d});return i().store.find(this.type,h)})),(0,s.override)(O().prototype,"getAllItems",(function(t){return"walsgit-discussion-cards"in flarum.extensions?this.extraDiscussions.concat(this.getPages(!0).map((function(t){return t.items})).flat()):t()})),(0,s.override)(O().prototype,"getPages",(function(t,e){var n=this;void 0===e&&(e=!1);var i=t();return"walsgit-discussion-cards"in flarum.extensions?e?i:[i.find((function(t){return t.number===n.location.page}))]:i})),(0,s.override)(O().prototype,"parseResults",(function(t,e,n){var i;if(!this.usePaginationMode)return t(e,n);var s=Number(e),o=(null==(i=n.payload)?void 0:i.links)||{},r={number:s,items:n,hasNext:!(null==o||!o.next),hasPrev:!(null==o||!o.prev)};if(this.hasPage=function(t){var e=this.getPages(!0);return 0!==e.length&&e.some((function(e){return e.number===t}))},this.hasPage(s)||this.pages.push(r),this.pages=this.pages.sort((function(t,e){return t.number-e.number})),this.location={page:s},this.totalDiscussionCount=w()(n.payload.jsonapi.totalResultsCount),this.options.cacheDiscussions)if(this.lastTotalDiscussionCount!==this.totalDiscussionCount()&&0!==this.lastTotalDiscussionCount||0===this.lastTotalDiscussionCount||this.isRefreshing)this.lastTotalDiscussionCount=this.totalDiscussionCount(),this.lastDiscussions=new Array(this.lastTotalDiscussionCount),this.lastLoadedPage={};else{var a;this.lastLoadedPage[s]=r;var u=this.options.perPage*(s-1),l=this.options.perPage*s;(a=this.lastDiscussions).splice.apply(a,[u,l-u].concat(n))}this.getTotalPages=function(){return Math.ceil(this.totalDiscussionCount()/this.options.perPage)},this.page=w()(r),this.perPage=w()(this.options.perPage),this.totalPages=w()(this.getTotalPages()),function(t,e,n){try{var i,s=x(t,e);if(!s)return;var o={ids:Array.isArray(n)?n.map((function(t){return t&&t.id&&t.id()})):[],total:t.totalDiscussionCount&&t.totalDiscussionCount()||n&&n.payload&&n.payload.jsonapi&&n.payload.jsonapi.totalResultsCount||0,ts:Date.now(),perPage:(null==(i=t.options)?void 0:i.perPage)||20};sessionStorage.setItem(s,JSON.stringify(o))}catch(t){}}(this,s,n),this.ctrl={scrollToTop:function(){var t=document.querySelector("#content > .IndexPage > .container"),e=document.querySelector("#header"),n=0;if(e&&(n=e.clientHeight),t){var i=t.getBoundingClientRect().top+window.scrollY-n;setTimeout((function(){return window.scrollTo({top:i,behavior:"smooth"})}),50)}}.bind(this),prevPage:function(){var t=this,e=this.page().number-1;e<1||(this.page(e),this.loadingPrev=!0,this.loadPage(e).then((function(n){t.parseResults(e,n),t.loadingPrev=!1,A(e,!0),t.ctrl.scrollToTop()})))}.bind(this),nextPage:function(){var t=this,e=this.page().number+1;e>this.totalPages()?e=this.totalPages():(this.page(e),this.loadingNext=!0,this.loadPage(e).then((function(n){t.parseResults(e,n),t.loadingNext=!1,A(e,!0),t.ctrl.scrollToTop()})))}.bind(this),toPage:function(t){var e=this,n=Number(t);this.page().number===n||n<1||n>this.totalPages()||(this.page(n),this.initialLoading=!0,this.loadPage(n).then((function(t){e.parseResults(n,t),e.initialLoading=!1,A(n,!0),e.ctrl.scrollToTop()})))}.bind(this),pageList:function(){for(var t=[],e=Math.max(parseInt(this.page().number)-this.options.leftEdges,1),n=Math.min(parseInt(this.page().number)+this.options.rightEdges,this.totalPages()),i=e;i<=n;i++)t.push(i);return t}.bind(this)},"undefined"!=typeof m&&m.redraw&&m.redraw()})),(0,s.override)(O().prototype,"addDiscussion",(function(t,e){var n=this;if(!this.usePaginationMode)return t(e);clearTimeout(this.__rtRefreshTimer),this.__rtRefreshTimer=setTimeout((function(){n.page=n.page||w()({number:1,items:[]}),n.location={page:1},n.__bypassSessionOnce=!0,T(n,1),n.refresh(1)}),50);var i=this.lastDiscussions.indexOf(e);-1!==i?(this.lastDiscussions.splice(i),this.lastDiscussions.unshift(e)):(this.lastDiscussions.unshift(e),this.lastTotalDiscussionCount++,this.totalDiscussionCount(this.lastTotalDiscussionCount)),"undefined"!=typeof m&&m.redraw&&m.redraw()})),(0,s.override)(O().prototype,"deleteDiscussion",(function(t,e){if(!this.usePaginationMode)return t(e);var n=this.lastDiscussions.indexOf(e);-1!==n&&(this.lastDiscussions.splice(n),this.lastTotalDiscussionCount--,this.totalDiscussionCount(this.lastTotalDiscussionCount)),"undefined"!=typeof m&&m.redraw&&m.redraw()})),(0,s.override)(O().prototype,"clear",(function(t){return this.usePaginationMode?(this.lastDiscussions=[],this.lastLoadedPage={},this.lastRequestParams={},this.lastTotalDiscussionCount=0,this.lastTotalPages=0,this.totalDiscussionCount=w()(0),t()):t()}))}window.__dlBackMarkerInstalled||(window.__dlBackMarkerInstalled=!0,document.addEventListener("click",(function(t){var e=t.target;if(e&&(null==e.closest?void 0:e.closest('a[href*="/d/"]'))){try{sessionStorage.setItem(I,JSON.stringify({t:Date.now(),base:C()}))}catch(t){}!function(){try{for(var t=Array.from(document.querySelectorAll("li.DiscussionListItem")),e=k(),n=null,i=1/0,s=0,o=t;s<o.length;s++){var r=o[s],a=r.getBoundingClientRect();a.bottom<=e||a.top>=e&&a.top<i&&(n=r,i=a.top)}var u,l,c=window.scrollY||document.documentElement.scrollTop||0;if(n){u=n.getAttribute("data-id")||void 0;var p=n.querySelector('a[href*="/d/"]');l=(null==p?void 0:p.getAttribute("href"))||void 0}sessionStorage.setItem(R(),JSON.stringify({id:u,href:l,y:c,t:Date.now()}))}catch(t){}}()}}),{capture:!0,passive:!0})),window.__dlRestoreFromAnchor=function(t){if(t){var e=k(),n=function(t){if(!t)return null;if(t.id){var e=document.querySelector('li.DiscussionListItem[data-id="'+t.id+'"]');if(e)return e}if(t.href){var n=t.href.match(/\/d\/(\d+)/);if(n){var i,s=null==(i=document.querySelector('li.DiscussionListItem a[href*="/d/'+n[1]+'"]'))?void 0:i.closest("li.DiscussionListItem");if(s)return s}}return null}(t);if(n){var i=window.scrollY+n.getBoundingClientRect().top-e-8;requestAnimationFrame((function(){return window.scrollTo(0,Math.max(0,i))}))}else if("number"==typeof t.y){var s=0;!function n(){(document.documentElement.scrollHeight||document.body.scrollHeight||0)>t.y+50||s>=40?requestAnimationFrame((function(){return window.scrollTo(0,Math.max(0,t.y-Math.max(0,e)))})):(s++,setTimeout(n,50))}()}}};const B=flarum.core.compat["forum/components/DiscussionList"];var M=t.n(B);const j=flarum.core.compat["forum/components/DiscussionListItem"];var J=t.n(j);const q=flarum.core.compat["common/utils/classList"];var F=t.n(q);function E(t,e){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},E(t,e)}const U=flarum.core.compat["common/Component"];var z=t.n(U);const H=flarum.core.compat["common/components/Button"];var Y=t.n(H),$=function(t){var e,n;function i(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))||this).attrs=void 0,e}n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,E(e,n);var s=i.prototype;return s.view=function(t){var e=this.attrs.state;return m("div",{className:"Pagination"},m("ul",{class:"IndexPage-toolbar-view"},m("li",null,this.buttonFirst()),m("li",null,this.buttonBack()),e.ctrl.pageList().map((function(t){return m("li",null,m(Y(),{title:t,className:e.page().number==t?"Button Button--primary Button--active":"Button",onclick:function(){e.ctrl.toPage(t)}},t))})),m("li",null,this.buttonNext()),m("li",null,this.buttonLast()),m("li",null,this.inputJump()),m("li",null,this.buttonJump())))},s.buttonFirst=function(){var t=this.attrs.state;return Y().component({title:"First",icon:"fa fa-angle-double-left fas fa-angles-left",className:"Button Button--icon",onclick:function(){t.ctrl.toPage(1)},disabled:1==t.page().number})},s.buttonBack=function(){var t=this.attrs.state;return Y().component({title:"Back",icon:"fa fa-angle-left fas",className:"Button Button--icon",onclick:function(){var e=t.page().number;t.ctrl.toPage(parseInt(e)-1)},disabled:1==t.page().number})},s.buttonNext=function(){var t=this.attrs.state;return Y().component({title:"Next",icon:"fa fa-angle-right fas",className:"Button Button--icon",onclick:function(){var e=t.page().number;t.ctrl.toPage(parseInt(e)+1)},disabled:t.page().number==t.totalPages()})},s.buttonLast=function(){var t=this.attrs.state;return Y().component({title:"Last",icon:"fa fa-angle-double-right fas fa-angles-right",className:"Button Button--icon",onclick:function(){var e=parseInt(t.totalPages());t.ctrl.toPage(e)},disabled:t.page().number==t.totalPages()})},s.JumpFunc=function(){var t,e=this.attrs.state,n=parseInt(null==(t=document.getElementById("pagination-inputJump"))?void 0:t.value);Number.isFinite(n)&&Number.isSafeInteger(n)&&n!=e.page().number&&1<=n&&n<=e.totalPages()&&e.ctrl.toPage(n)},s.inputJump=function(){var t=this,e=this.attrs.state;return m("input.FromControl",{id:"pagination-inputJump",placeholder:void 0===e.page().number?"":""+e.page().number,onkeydown:function(e){e.redraw=!1,13==e.keyCode&&(e.redraw=!0,t.JumpFunc())}})},s.buttonJump=function(){return Y().component({title:"Jump",icon:"fa fa-paper-plane fas",className:"Button Button--icon",onclick:this.JumpFunc.bind(this)})},i}(z());function G(){(0,s.override)(M().prototype,"view",(function(t){var e,n,s=null==(e=this.attrs)?void 0:e.state,o=t();if(o.attrs=o.attrs||{},o.attrs.className=F()("DiscussionList",{"DiscussionList--searchResults":null==s||null==s.isSearchResults?void 0:s.isSearchResults()},o.attrs.className),null!=s&&s.silentRestoreOnce){var r=function(t){return t&&"object"==typeof t&&t.attrs&&(e=t.attrs,String(e&&(e.className||e.class)||"")).includes("LoadingIndicator");var e};!function t(e){if(e)if(Array.isArray(e))for(var n=e.length-1;n>=0;n--){var i=e[n];r(i)?e.splice(n,1):t(i)}else if("string"!=typeof e&&"number"!=typeof e){var s,o=(s=e,Array.isArray(s)?s:s&&Array.isArray(s.children)?s.children:null);if(o)for(var a=o.length-1;a>=0;a--){var u=o[a];r(u)?o.splice(a,1):t(u)}}}(o)}if(null!=s&&s.__hideListOnce){var a=o.attrs.style||"";o.attrs.style=(a?a+";":"")+"visibility:hidden";var u=o.attrs.oncreate;o.attrs.oncreate=function(t){"function"==typeof u&&u.call(this,t);try{if(window.__dlRestoreFromAnchor&&s.__pendingAnchor){var e=document.documentElement,n=e.style.scrollBehavior;e.style.scrollBehavior="auto",window.__dlRestoreFromAnchor(s.__pendingAnchor),e.style.scrollBehavior=n||""}}catch(t){}s.__pendingAnchor=null,s.__hideListOnce=!1,"undefined"!=typeof m&&m.redraw&&m.redraw()}}if(null==s||!s.usePaginationMode||null!=s.isLoading&&s.isLoading()||null!=s.isEmpty&&s.isEmpty())return o;var l="walsgit-discussion-cards"in flarum.extensions,c=(null==(n=s.options)?void 0:n.perPage)||0,p=s.page||1,f=(null==s.getParams?void 0:s.getParams())||{},d=s.getPages?s.getPages(!0):[],h=[];if(Array.isArray(d)&&d.length){var g=d.find((function(t){var e;return(null==t?void 0:t.number)===(null==(e=s.location)?void 0:e.page)}))||d[0];g&&Array.isArray(g.items)&&(h=g.items)}var v=h.length?h.map((function(t,e){return m("li",{key:t.id(),"data-id":t.id(),role:"article","aria-setsize":-1,"aria-posinset":p*c+e},m(J(),{discussion:t,params:f}))})):null,y=function(t){return Array.isArray(t)?t:t&&Array.isArray(t.children)?t.children:null},P=[];if(function t(e,n,i){if(e)if(Array.isArray(e))for(var s=0;s<e.length;s++)t(e[s],e,s);else if("string"!=typeof e&&"number"!=typeof e){(a=e)&&"ul"===a.tag&&(u=a.attrs,String(u&&(u.className||u.class)||"")).includes("DiscussionList-discussions")&&P.push({node:e,parent:n,index:i});var o=y(e);if(o)for(var r=0;r<o.length;r++)t(o[r],e,r)}var a,u}(o,null,null),l)return C(A(),o,P.length?P[0]:null,s),o;if(P.length>0){var b=P.find((function(t){var e=y(t.node);return e&&e.some((function(t){return t&&"li"===t.tag}))}))||P.find((function(t){var e;return(null==(e=t.node)?void 0:e.attrs)&&"aria-busy"in t.node.attrs}))||P[0];if(v){var w=y(b.node);w?w.splice.apply(w,[0,w.length].concat(v)):b.node.children=v}for(var L=P.length-1;L>=0;L--){var D,O=P[L];if(O!==b){var _=y((Array.isArray(O.parent),O.parent));if(_){var S=null!=(D=O.index)?D:_.indexOf(O.node);S>=0&&_[S]===O.node&&((y(O.node)||[]).some((function(t){return t&&"li"===t.tag}))||_.splice(S,1))}}}return C(A(),o,b,s),o}return C(A(),o,null,s),o;function A(){return i().forum.attribute("foskym-pagination.paginationPosition")}function C(t,e,n,i){var s="above"===t||"both"===t,o="under"===t||"both"===t;if(s||o){var r=$.component({state:i});if(n&&n.parent){var a,u=n.parent,l=y((Array.isArray(u),u));if(!l)return;var c=null!=(a=n.index)?a:l.indexOf(n.node);c<0&&(c=0),s&&l.splice(c,0,r),o&&l.splice(c+(s?2:1),0,r)}else{var p=y(e);if(!p)return;s&&p.unshift(r),o&&p.push(r)}}}}))}i().initializers.add("foskym/flarum-pagination",(function(){(0,s.extend)(f().prototype,"oninit",(function(){var t=this.user.preferences();this.userCustom=w()(t["foskym-pagination.userCustom"]),this.userPaginationOnLoading=w()(t["foskym-pagination.userPaginationOnLoading"])})),(0,s.extend)(f().prototype,"settingsItems",(function(t){Boolean(c().forum.attribute("foskym-pagination.canUserPref"))&&t.add("pagination_settings",h().component({label:c().translator.trans("foskym-pagination.forum.user.settings.head"),className:"SettingsPage-pagination"},this.Pagination_UserPrefItems().toArray()))})),f().prototype.Pagination_UserPrefItems=function(){var t=this,e=new(v());return e.add("foskym-pagination.userCustom",P().component({state:this.user.preferences()["foskym-pagination.userCustom"],onchange:function(e){t.UserCustom_Loading=!0,t.user.savePreferences({"foskym-pagination.userCustom":e}).then((function(){t.UserCustom_Loading=!1,m.redraw()}))},loading:this.UserCustom_Loading},c().translator.trans("foskym-pagination.forum.user.settings.userCustom"))),this.user.preferences()["foskym-pagination.userCustom"]&&e.add("foskym-pagination.userPaginationOnLoading",P().component({state:this.user.preferences()["foskym-pagination.userPaginationOnLoading"],onchange:function(e){t.userPaginationOnLoading_Loading=!0,t.user.savePreferences({"foskym-pagination.userPaginationOnLoading":e}).then((function(){t.userPaginationOnLoading_Loading=!1,m.redraw()}))},loading:this.userPaginationOnLoading_Loading},c().translator.trans("foskym-pagination.forum.user.settings.userPaginationOnLoading"))),e},N(),G(),(0,s.extend)(u(),"deleteAction",(function(){if(this.usePaginationMode&&i().discussions){var t=i().discussions.location.page;i().discussions.refresh(t)}})),(0,s.extend)(r().prototype,"onsubmit",(function(){this.usePaginationMode&&i().discussions&&i().discussions.refresh()}))}),-2)})(),module.exports=e})();
//# sourceMappingURL=forum.js.map